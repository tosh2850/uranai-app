/* 基本配色（Bootstrap の body 白を確実に打ち消す） */
body { background: #0b1020 !important; color: #e9eefb; }
a { color: #d6dcff; }
a:hover { color: #ffffff; }

/* ナビ & オフキャンバス（常にダークを維持） */
.navbar, .offcanvas { background: #0f1530 !important; }
.navbar .navbar-brand, .navbar .nav-link { color: #e9eefb !important; }
.navbar .nav-link:hover { color: #ffffff !important; }
.navbar .navbar-toggler { border-color: rgba(255,255,255,.25); }
.navbar .navbar-toggler-icon { filter: invert(1) brightness(1.2); }

/* カード（既定＝ダーク） */
.card { background: #121938; border: 1px solid rgba(255,255,255,.08); }

/* ボタン */
.btn-primary { background: #6c7bff; border: none; }
.btn-primary:hover, .btn-primary:focus { background: #5a6af5; }
.btn-outline-light { border-color: rgba(255,255,255,.25); color: #e9eefb; }
.btn-outline-light:hover, .btn-outline-light:focus { background: rgba(255,255,255,.1); color: #fff; }

/* テキスト色（ダーク時） */
.accent { color:#8be9fd; }
.muted { color: #b8c1ec; }
.text-question { color:#ffffff; }
.text-contrast { color:#ffffff; }

/* 進捗バー */
.progress { background: rgba(255,255,255,.08); }
.progress-bar { background: #6c7bff; }

/* リスト（選択肢） */
.choice:hover { background: rgba(255,255,255,.06); }
.list-group-item { background: transparent; color: #e9eefb; border-color: rgba(255,255,255,.08); }
.list-group-item.active {
  background: linear-gradient(90deg, rgba(108,123,255,.25), rgba(108,123,255,.15));
  color: #fff; border-color: rgba(108,123,255,.6);
}

/* フォーム */
.form-control, .form-select { background: #0f1530; color: #e9eefb; border-color: rgba(255,255,255,.18); }
.form-control::placeholder { color: #a8b0d8; }
.form-control:focus, .form-select:focus {
  background: #0f1530; color: #fff; border-color: #6c7bff;
  box-shadow: 0 0 0 .2rem rgba(108,123,255,.25);
}

/* メール登録メッセージ */
#subMsg { display:inline-block; margin-top:.25rem; }
#subMsg.text-success { color:#78e08f !important; }
#subMsg.text-warning { color:#ffd166 !important; }
#subMsg.text-danger  { color:#ff6b6b !important; }

/* ===== Hero ===== */
.hero {
  position: relative;
  background: url("/img/hero.jpg") center / cover no-repeat;
  min-height: 60vh;
  display: flex;
  align-items: center;
  isolation: isolate;
}
.hero::before { content:""; position:absolute; inset:0; background: rgba(0,0,0,0.5); z-index:0; }
.hero .hero-body { position: relative; z-index: 1; }
.hero h1 { color: #ffffff; text-shadow: 0 2px 8px rgba(0,0,0,.35); }
.hero .lead { color: #e9eefb; }
.hero .btn.btn-outline-light:hover, .hero .btn.btn-outline-light:focus {
  background: rgba(255,255,255,.15); color: #fff;
}
@media (max-width: 576px) {
  .hero { min-height: 70vh; }
  .hero h1 { font-size: 1.9rem; }
  .hero .lead { font-size: 1.05rem; }
}

/* === About（ダークのまま） === */
.about-section { background: transparent; }
.about-section .card { background: rgba(18,25,56,0.95); border: 1px solid rgba(255,255,255,0.12); }
.text-contrast { color: #ffffff !important; }
.about-section ul li { color: #ffffff; }

/* ====== 結果レビュー（ダーク） ====== */
.review-correct { color: #78e08f !important; font-weight: 700; }
.review-wrong   { color: #ff6b6b !important; font-weight: 700; }
.review-answer  { color: #ffffff !important; }
.review-question{ color: #ffffff !important; font-weight: 600; text-shadow: 0 1px 3px rgba(0,0,0,0.6); }

/* ===== ダーク時既定の本文 ===== */
.prose { line-height: 1.9; color: #e9eefb; }
.prose h1, .prose h2, .prose h3 { color: #ffffff; margin-top: 1.5rem; }
.prose a { color: #d6dcff; }
.prose a:hover { color: #fff; }
.breadcrumb .link-muted { color: #a8b0d8; }
.breadcrumb .link-muted:hover { color: #d6dcff; }

/* === 記事ページ用（本文ボックスだけ白） === */
/* ページ全体はダークのまま。白くするのは .prose のみ */
body.article-page .prose {
  background: #ffffff !important;
  color: #333333 !important;
  padding: 1.25rem;
  border-radius: 0.75rem;
  box-shadow: 0 2px 10px rgba(0,0,0,0.08);
}
body.article-page .prose h1,
body.article-page .prose h2,
body.article-page .prose h3 { color: #111111 !important; }
body.article-page .prose a { color: #0066cc !important; }
body.article-page .prose a:hover { color: #004080 !important; }
body.article-page .prose .muted { color: #666666 !important; }

/* 表（本文内だけ白） */
body.article-page .prose table,
body.article-page .prose .table { background:#ffffff !important; color:#000000 !important; }
body.article-page .prose th,
body.article-page .prose td { background:#ffffff !important; color:#000000 !important; border:1px solid #ddd !important; }

/* 本文内のカード（白） */
body.article-page .prose .card {
  background:#ffffff !important; border:1px solid #ddd !important; color:#000000 !important;
  box-shadow:0 2px 6px rgba(0,0,0,0.05);
}

/* === 記事一覧：カードだけ白 & 黒文字 === */
.articles-list .card {
  background:#ffffff !important; border:1px solid #ddd !important; color:#000000 !important;
  box-shadow:0 2px 6px rgba(0,0,0,0.05);
}
.articles-list .card-title { color:#111111 !important; }
.articles-list .card-text  { color:#333333 !important; }
.articles-list .card .muted { color:#666666 !important; }

/* === Navbar: activeリンクの視認性改善（ダーク背景でもくっきり） === */
.navbar .nav-link {
  position: relative;
}

/* アクティブ時は白文字＋下線バーを表示、背景色は付けない */
.navbar .nav-link.active,
.navbar .nav-link[aria-current="page"],
.navbar .nav-link.active:hover,
.navbar .nav-link.active:focus {
  color: #ffffff !important;
  background: transparent !important;
  text-decoration: none;
}

/* 下線のアクセント（6c7bff） */
.navbar .nav-link.active::after,
.navbar .nav-link[aria-current="page"]::after {
  content: "";
  position: absolute;
  left: .5rem;
  right: .5rem;
  bottom: .25rem;
  height: 2px;
  background: #6c7bff;
  border-radius: 2px;
  opacity: 0.95;
}

/* Offcanvas 内でも同じ見た目を確保 */
.offcanvas .nav-link.active,
.offcanvas .nav-link[aria-current="page"] {
  color: #ffffff !important;
  background: transparent !important;
}
.offcanvas .nav-link.active::after,
.offcanvas .nav-link[aria-current="page"]::after {
  content: "";
  display: block;
  height: 2px;
  margin: .25rem .5rem 0;
  background: #6c7bff;
  border-radius: 2px;
  opacity: 0.95;
}

/* ========== note風：記事タイポグラフィ強化（記事本文エリアのみ） ========== */

/* 日本語を読みやすくするサンセリフ系スタック（端末に応じて自然に切替） */
:root {
  --jp-font: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic ProN",
             "Hiragino Sans", "Yu Gothic", "YuGothic", "Noto Sans JP",
             "Segoe UI", "Helvetica Neue", Arial, sans-serif;
}

/* 記事本文の白ボックス（左右は既存ダークのまま） */
body.article-page .prose {
  font-family: var(--jp-font);
  /* 可読幅：およそ 640–720px。行長45–75字を狙う */
  max-width: 44.5rem;           /* ≒ 712px */
  margin-inline: auto;          /* 中央寄せ */
  background: #fff !important;
  color: #333 !important;
  padding: clamp(1rem, 2vw + .5rem, 2rem);
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,.06);
  line-height: 1.9;             /* 基本行間（PCは後述でやや広げる） */
}

/* ベース文字サイズ（端末で自動調整） */
body.article-page .prose {
  font-size: clamp(16px, 1.6vw + 12px, 18px);
}

/* 見出し（note的に主見出しは中央＆余白広め、下層は左揃え） */
body.article-page .prose h1,
body.article-page .prose h2,
body.article-page .prose h3 {
  color: #111 !important;
  letter-spacing: .02em;
}

/* タイトル（h1）を中央・大きめ・下に余白 */
body.article-page .prose h1 {
  font-weight: 700;
  text-align: center;
  font-size: clamp(26px, 2.2vw + 18px, 34px);
  line-height: 1.3;
  margin: 0 0 1.2rem;
}

/* セクション見出し（h2/h3）は左揃え・余白ゆったり */
body.article-page .prose h2 {
  font-weight: 700;
  font-size: clamp(20px, 1.2vw + 14px, 24px);
  line-height: 1.4;
  margin: 2rem 0 .75rem;
}
body.article-page .prose h3 {
  font-weight: 700;
  font-size: clamp(18px, 1vw + 13px, 20px);
  line-height: 1.45;
  margin: 1.5rem 0 .5rem;
}

/* 段落・リストの行間と段落間マージンを最適化 */
body.article-page .prose p,
body.article-page .prose ul,
body.article-page .prose ol,
body.article-page .prose blockquote,
body.article-page .prose pre,
body.article-page .prose table {
  margin-top: 0.9rem;
  margin-bottom: 0.9rem;
}

/* モバイルは行間やや広め、PCはさらに広げて可読性UP */
@media (max-width: 576px) {
  body.article-page .prose { line-height: 1.85; }
}
@media (min-width: 992px) {
  body.article-page .prose { line-height: 2.0; }
}

/* 文章中の小さめ注釈（.muted） */
body.article-page .prose .muted { color: #666 !important; }

/* テーブルは横スクロール安全＆簡素な罫線 */
body.article-page .prose table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.95em;
}
body.article-page .prose th,
body.article-page .prose td {
  border: 1px solid #e5e7eb !important; /* 明るいグレー */
  padding: .6rem .75rem;
  background: #fff !important;
  color: #111 !important;
}
body.article-page .prose thead th {
  background: #f8fafc !important;       /* ヘッダだけ薄グレー */
  font-weight: 700;
}

/* コード/整形テキストは読みやすい等幅＋淡背景 */
body.article-page .prose pre,
body.article-page .prose code,
body.article-page .prose kbd {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
               "Courier New", monospace;
}
body.article-page .prose pre {
  background: #f7f7f9;
  color: #111;
  border: 1px solid #eee;
  border-radius: 8px;
  padding: .9rem 1rem;
  overflow: auto;
}

/* 引用は余白と左ボーダーで読みやすく */
body.article-page .prose blockquote {
  border-left: 4px solid #e5e7eb;
  padding-left: 1rem;
  color: #444;
  background: #fcfcfd;
}

/* リンク色は控えめなブルー、ホバーで濃く */
body.article-page .prose a { color: #0b66c3; }
body.article-page .prose a:hover { color: #084a8f; text-decoration: underline; }

/* 画像は本文幅にフィット＋角丸 */
body.article-page .prose img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
}

/* パンくずや小要素の字間・サイズ調整（本文とは独立） */
body.article-page nav.breadcrumb,
body.article-page .breadcrumb {
  font-size: .95rem;
  letter-spacing: .01em;
}

/* === PC表示時は本文幅を少し広げる（note風の可読域を維持しつつ） === */
@media (min-width: 992px) {           /* ラップトップ以上 */
  body.article-page .prose {
    max-width: 50rem;                 /* ≒ 800px（元: 44.5rem ≒ 712px） */
  }
}
@media (min-width: 1400px) {          /* 大画面ではもう少しだけ */
  body.article-page .prose {
    max-width: 54rem;                 /* ≒ 864px：行長を伸ばしすぎない上限 */
  }
}

/* 既存：記事一覧(.articles-list)やヘッダー/左右余白はダークを維持するので触らない */

/* ===== 読みやすさ向上パッチ（追記） ===== */

/* Hero：背景をもう少し暗くして文字をくっきり */
.hero::before { background: rgba(0,0,0,0.68) !important; }
.hero h1,
.hero .lead { text-shadow: 0 3px 12px rgba(0,0,0,.5) !important; }

/* カード内テキストのコントラストを底上げ */
.card { color: #eef2ff !important; }       /* 見出し/本文の基準色 */
.card p, .card li, .card .muted { color: #dbe2ff !important; }
.card h1, .card h2, .card h3, .card h4, .card h5, .card h6 { color: #ffffff !important; }

/* カード内リンク（ボタン以外）だけに適用 */
.card a:not(.btn) {
  color: #bfc6ff !important;
  text-decoration-color: rgba(191,198,255,.5);
}
.card a:not(.btn):hover {
  color: #ffffff !important;
  text-decoration-color: rgba(255,255,255,.9);
}

/* アウトライン系ボタンの視認性（暗背景で沈む問題に対応） */
.btn-outline-secondary {
  border-color: #b7bfff !important;
  color: #e9eefb !important;
}
.btn-outline-secondary:hover,
.btn-outline-secondary:focus {
  background: rgba(183,191,255,.15) !important;
  color: #ffffff !important;
  border-color: #c3caff !important;
}

/* バッジの数字が背景に沈む場合の補正（おすすめセクション） */
.badge.bg-primary {
  background: #6c7bff !important;    /* 既存主色 */
  color: #ffffff !important;
  box-shadow: 0 0 0 1px rgba(255,255,255,.08) inset;
}

/* リスト項目（暗カード上の箇条書き）を読みやすく */
.about-section ul li { color: #eef2ff !important; }

/* フッター：リンクが薄い場合はやや明るく */
.site-footer__links a { color: #9aa3c9 !important; }
.site-footer__links a:hover { color: #cbd3ff !important; }

/* 入力フォームのプレースホルダーをもう少し明るく */
.form-control::placeholder { color: #c3c9ee !important; }

/* スモール画面でも文字が潰れないように少しだけサイズ底上げ（任意） */
@media (max-width: 576px) {
  body { font-size: 17px; }
  .hero .lead { font-size: 1.1rem !important; }
}

